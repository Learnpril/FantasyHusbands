<svg width="800" height="600" viewBox="0 0 800 600" fill="none" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="libraryWalls" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8B4513;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#654321;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="bookSpine" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#800000;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#4B0082;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#006400;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="floorPattern" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#2F2F2F;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1C1C1C;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="candleFlame" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FFD700;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#FF8C00;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FF4500;stop-opacity:1" />
    </linearGradient>
    <radialGradient id="candleGlow" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#FFD700;stop-opacity:0.6" />
      <stop offset="50%" style="stop-color:#FF8C00;stop-opacity:0.3" />
      <stop offset="100%" style="stop-color:#FF4500;stop-opacity:0.1" />
    </radialGradient>
  </defs>

  <!-- Floor with ancient stone pattern -->
  <rect width="800" height="600" fill="url(#floorPattern)"/>
  
  <!-- Floor tiles -->
  <g opacity="0.3">
    <rect x="0" y="500" width="100" height="100" fill="#3A3A3A"/>
    <rect x="100" y="500" width="100" height="100" fill="#2F2F2F"/>
    <rect x="200" y="500" width="100" height="100" fill="#3A3A3A"/>
    <rect x="300" y="500" width="100" height="100" fill="#2F2F2F"/>
    <rect x="400" y="500" width="100" height="100" fill="#3A3A3A"/>
    <rect x="500" y="500" width="100" height="100" fill="#2F2F2F"/>
    <rect x="600" y="500" width="100" height="100" fill="#3A3A3A"/>
    <rect x="700" y="500" width="100" height="100" fill="#2F2F2F"/>
  </g>

  <!-- Back wall -->
  <rect x="0" y="0" width="800" height="450" fill="url(#libraryWalls)"/>
  
  <!-- Large bookshelf on the left -->
  <rect x="20" y="80" width="200" height="350" fill="#8B4513"/>
  <rect x="25" y="85" width="190" height="340" fill="#654321"/>
  
  <!-- Books on left shelf -->
  <g>
    <!-- Top shelf -->
    <rect x="30" y="90" width="12" height="60" fill="#800000"/>
    <rect x="42" y="90" width="15" height="60" fill="#4B0082"/>
    <rect x="57" y="90" width="10" height="60" fill="#006400"/>
    <rect x="67" y="90" width="18" height="60" fill="#8B4513"/>
    <rect x="85" y="90" width="14" height="60" fill="#800080"/>
    <rect x="99" y="90" width="16" height="60" fill="#B22222"/>
    <rect x="115" y="90" width="11" height="60" fill="#2F4F4F"/>
    <rect x="126" y="90" width="13" height="60" fill="#8B0000"/>
    <rect x="139" y="90" width="17" height="60" fill="#4B0082"/>
    <rect x="156" y="90" width="12" height="60" fill="#228B22"/>
    <rect x="168" y="90" width="14" height="60" fill="#800000"/>
    <rect x="182" y="90" width="15" height="60" fill="#8B4513"/>
    <rect x="197" y="90" width="18" height="60" fill="#4B0082"/>
    
    <!-- Second shelf -->
    <rect x="30" y="160" width="14" height="65" fill="#2F4F4F"/>
    <rect x="44" y="160" width="16" height="65" fill="#8B0000"/>
    <rect x="60" y="160" width="13" height="65" fill="#4B0082"/>
    <rect x="73" y="160" width="11" height="65" fill="#228B22"/>
    <rect x="84" y="160" width="15" height="65" fill="#800080"/>
    <rect x="99" y="160" width="17" height="65" fill="#8B4513"/>
    <rect x="116" y="160" width="12" height="65" fill="#B22222"/>
    <rect x="128" y="160" width="14" height="65" fill="#006400"/>
    <rect x="142" y="160" width="16" height="65" fill="#800000"/>
    <rect x="158" y="160" width="13" height="65" fill="#4B0082"/>
    <rect x="171" y="160" width="15" height="65" fill="#8B4513"/>
    <rect x="186" y="160" width="14" height="65" fill="#2F4F4F"/>
    <rect x="200" y="160" width="15" height="65" fill="#800080"/>
    
    <!-- Third shelf -->
    <rect x="30" y="235" width="15" height="70" fill="#8B4513"/>
    <rect x="45" y="235" width="12" height="70" fill="#4B0082"/>
    <rect x="57" y="235" width="16" height="70" fill="#800000"/>
    <rect x="73" y="235" width="14" height="70" fill="#228B22"/>
    <rect x="87" y="235" width="13" height="70" fill="#8B0000"/>
    <rect x="100" y="235" width="17" height="70" fill="#006400"/>
    <rect x="117" y="235" width="11" height="70" fill="#4B0082"/>
    <rect x="128" y="235" width="15" height="70" fill="#800080"/>
    <rect x="143" y="235" width="14" height="70" fill="#B22222"/>
    <rect x="157" y="235" width="16" height="70" fill="#8B4513"/>
    <rect x="173" y="235" width="12" height="70" fill="#2F4F4F"/>
    <rect x="185" y="235" width="15" height="70" fill="#800000"/>
    <rect x="200" y="235" width="15" height="70" fill="#4B0082"/>
    
    <!-- Bottom shelf -->
    <rect x="30" y="315" width="13" height="75" fill="#006400"/>
    <rect x="43" y="315" width="17" height="75" fill="#8B4513"/>
    <rect x="60" y="315" width="14" height="75" fill="#800080"/>
    <rect x="74" y="315" width="15" height="75" fill="#4B0082"/>
    <rect x="89" y="315" width="12" height="75" fill="#8B0000"/>
    <rect x="101" y="315" width="16" height="75" fill="#228B22"/>
    <rect x="117" y="315" width="13" height="75" fill="#B22222"/>
    <rect x="130" y="315" width="15" height="75" fill="#800000"/>
    <rect x="145" y="315" width="14" height="75" fill="#8B4513"/>
    <rect x="159" y="315" width="16" height="75" fill="#4B0082"/>
    <rect x="175" y="315" width="12" height="75" fill="#2F4F4F"/>
    <rect x="187" y="315" width="14" height="75" fill="#800080"/>
    <rect x="201" y="315" width="14" height="75" fill="#006400"/>
  </g>
  
  <!-- Central bookshelf -->
  <rect x="300" y="80" width="200" height="350" fill="#8B4513"/>
  <rect x="305" y="85" width="190" height="340" fill="#654321"/>
  
  <!-- Books on central shelf -->
  <g>
    <!-- Top shelf -->
    <rect x="310" y="90" width="14" height="60" fill="#4B0082"/>
    <rect x="324" y="90" width="12" height="60" fill="#800000"/>
    <rect x="336" y="90" width="16" height="60" fill="#228B22"/>
    <rect x="352" y="90" width="13" height="60" fill="#8B4513"/>
    <rect x="365" y="90" width="15" height="60" fill="#800080"/>
    <rect x="380" y="90" width="11" height="60" fill="#B22222"/>
    <rect x="391" y="90" width="17" height="60" fill="#006400"/>
    <rect x="408" y="90" width="14" height="60" fill="#4B0082"/>
    <rect x="422" y="90" width="12" height="60" fill="#8B0000"/>
    <rect x="434" y="90" width="15" height="60" fill="#2F4F4F"/>
    <rect x="449" y="90" width="13" height="60" fill="#800000"/>
    <rect x="462" y="90" width="16" height="60" fill="#8B4513"/>
    <rect x="478" y="90" width="14" height="60" fill="#4B0082"/>
    
    <!-- Second shelf -->
    <rect x="310" y="160" width="15" height="65" fill="#228B22"/>
    <rect x="325" y="160" width="13" height="65" fill="#8B4513"/>
    <rect x="338" y="160" width="16" height="65" fill="#800080"/>
    <rect x="354" y="160" width="12" height="65" fill="#4B0082"/>
    <rect x="366" y="160" width="14" height="65" fill="#8B0000"/>
    <rect x="380" y="160" width="17" height="65" fill="#006400"/>
    <rect x="397" y="160" width="11" height="65" fill="#B22222"/>
    <rect x="408" y="160" width="15" height="65" fill="#800000"/>
    <rect x="423" y="160" width="13" height="65" fill="#8B4513"/>
    <rect x="436" y="160" width="16" height="65" fill="#4B0082"/>
    <rect x="452" y="160" width="14" height="65" fill="#2F4F4F"/>
    <rect x="466" y="160" width="12" height="65" fill="#800080"/>
    <rect x="478" y="160" width="14" height="65" fill="#228B22"/>
    
    <!-- Third shelf -->
    <rect x="310" y="235" width="16" height="70" fill="#8B0000"/>
    <rect x="326" y="235" width="14" height="70" fill="#4B0082"/>
    <rect x="340" y="235" width="12" height="70" fill="#800000"/>
    <rect x="352" y="235" width="15" height="70" fill="#8B4513"/>
    <rect x="367" y="235" width="13" height="70" fill="#228B22"/>
    <rect x="380" y="235" width="17" height="70" fill="#800080"/>
    <rect x="397" y="235" width="11" height="70" fill="#006400"/>
    <rect x="408" y="235" width="14" height="70" fill="#B22222"/>
    <rect x="422" y="235" width="16" height="70" fill="#4B0082"/>
    <rect x="438" y="235" width="12" height="70" fill="#8B4513"/>
    <rect x="450" y="235" width="15" height="70" fill="#2F4F4F"/>
    <rect x="465" y="235" width="13" height="70" fill="#800000"/>
    <rect x="478" y="235" width="14" height="70" fill="#4B0082"/>
    
    <!-- Bottom shelf -->
    <rect x="310" y="315" width="14" height="75" fill="#8B4513"/>
    <rect x="324" y="315" width="16" height="75" fill="#228B22"/>
    <rect x="340" y="315" width="12" height="75" fill="#800080"/>
    <rect x="352" y="315" width="15" height="75" fill="#4B0082"/>
    <rect x="367" y="315" width="13" height="75" fill="#8B0000"/>
    <rect x="380" y="315" width="17" height="75" fill="#006400"/>
    <rect x="397" y="315" width="11" height="75" fill="#B22222"/>
    <rect x="408" y="315" width="14" height="75" fill="#800000"/>
    <rect x="422" y="315" width="16" height="75" fill="#8B4513"/>
    <rect x="438" y="315" width="12" height="75" fill="#4B0082"/>
    <rect x="450" y="315" width="15" height="75" fill="#2F4F4F"/>
    <rect x="465" y="315" width="13" height="75" fill="#800080"/>
    <rect x="478" y="315" width="14" height="75" fill="#228B22"/>
  </g>
  
  <!-- Right bookshelf -->
  <rect x="580" y="80" width="200" height="350" fill="#8B4513"/>
  <rect x="585" y="85" width="190" height="340" fill="#654321"/>
  
  <!-- Books on right shelf -->
  <g>
    <!-- Top shelf -->
    <rect x="590" y="90" width="13" height="60" fill="#800080"/>
    <rect x="603" y="90" width="15" height="60" fill="#4B0082"/>
    <rect x="618" y="90" width="12" height="60" fill="#8B4513"/>
    <rect x="630" y="90" width="16" height="60" fill="#228B22"/>
    <rect x="646" y="90" width="14" height="60" fill="#800000"/>
    <rect x="660" y="90" width="11" height="60" fill="#8B0000"/>
    <rect x="671" y="90" width="17" height="60" fill="#006400"/>
    <rect x="688" y="90" width="13" height="60" fill="#B22222"/>
    <rect x="701" y="90" width="15" height="60" fill="#4B0082"/>
    <rect x="716" y="90" width="12" height="60" fill="#2F4F4F"/>
    <rect x="728" y="90" width="14" height="60" fill="#800080"/>
    <rect x="742" y="90" width="16" height="60" fill="#8B4513"/>
    <rect x="758" y="90" width="12" height="60" fill="#228B22"/>
    
    <!-- Second shelf -->
    <rect x="590" y="160" width="16" height="65" fill="#8B4513"/>
    <rect x="606" y="160" width="12" height="65" fill="#4B0082"/>
    <rect x="618" y="160" width="14" height="65" fill="#800000"/>
    <rect x="632" y="160" width="15" height="65" fill="#228B22"/>
    <rect x="647" y="160" width="13" height="65" fill="#8B0000"/>
    <rect x="660" y="160" width="17" height="65" fill="#800080"/>
    <rect x="677" y="160" width="11" height="65" fill="#006400"/>
    <rect x="688" y="160" width="14" height="65" fill="#B22222"/>
    <rect x="702" y="160" width="16" height="65" fill="#4B0082"/>
    <rect x="718" y="160" width="12" height="65" fill="#8B4513"/>
    <rect x="730" y="160" width="15" height="65" fill="#2F4F4F"/>
    <rect x="745" y="160" width="13" height="65" fill="#800000"/>
    <rect x="758" y="160" width="12" height="65" fill="#4B0082"/>
    
    <!-- Third shelf -->
    <rect x="590" y="235" width="14" height="70" fill="#228B22"/>
    <rect x="604" y="235" width="16" height="70" fill="#8B4513"/>
    <rect x="620" y="235" width="12" height="70" fill="#800080"/>
    <rect x="632" y="235" width="15" height="70" fill="#4B0082"/>
    <rect x="647" y="235" width="13" height="70" fill="#8B0000"/>
    <rect x="660" y="235" width="17" height="70" fill="#006400"/>
    <rect x="677" y="235" width="11" height="70" fill="#B22222"/>
    <rect x="688" y="235" width="14" height="70" fill="#800000"/>
    <rect x="702" y="235" width="16" height="70" fill="#8B4513"/>
    <rect x="718" y="235" width="12" height="70" fill="#4B0082"/>
    <rect x="730" y="235" width="15" height="70" fill="#2F4F4F"/>
    <rect x="745" y="235" width="13" height="70" fill="#800080"/>
    <rect x="758" y="235" width="12" height="70" fill="#228B22"/>
    
    <!-- Bottom shelf -->
    <rect x="590" y="315" width="15" height="75" fill="#4B0082"/>
    <rect x="605" y="315" width="13" height="75" fill="#8B4513"/>
    <rect x="618" y="315" width="16" height="75" fill="#800000"/>
    <rect x="634" y="315" width="12" height="75" fill="#228B22"/>
    <rect x="646" y="315" width="14" height="75" fill="#8B0000"/>
    <rect x="660" y="315" width="17" height="75" fill="#800080"/>
    <rect x="677" y="315" width="11" height="75" fill="#006400"/>
    <rect x="688" y="315" width="15" height="75" fill="#B22222"/>
    <rect x="703" y="315" width="13" height="75" fill="#4B0082"/>
    <rect x="716" y="315" width="16" height="75" fill="#8B4513"/>
    <rect x="732" y="315" width="12" height="75" fill="#2F4F4F"/>
    <rect x="744" y="315" width="14" height="75" fill="#800080"/>
    <rect x="758" y="315" width="12" height="75" fill="#228B22"/>
  </g>
  
  <!-- Ancient reading table in center -->
  <rect x="250" y="400" width="300" height="20" fill="#8B4513"/>
  <rect x="260" y="420" width="8" height="80" fill="#654321"/>
  <rect x="352" y="420" width="8" height="80" fill="#654321"/>
  <rect x="440" y="420" width="8" height="80" fill="#654321"/>
  <rect x="532" y="420" width="8" height="80" fill="#654321"/>
  
  <!-- Books and scrolls on table -->
  <rect x="270" y="385" width="30" height="15" fill="#8B4513"/>
  <rect x="275" y="387" width="20" height="11" fill="#F5DEB3"/>
  
  <rect x="320" y="380" width="25" height="20" fill="#4B0082"/>
  <rect x="323" y="382" width="19" height="16" fill="#DDA0DD"/>
  
  <circle cx="380" cy="390" r="15" fill="#F5DEB3"/>
  <circle cx="380" cy="390" r="12" fill="#E6E6FA"/>
  
  <rect x="450" y="385" width="40" height="15" fill="#800000"/>
  <rect x="453" y="387" width="34" height="11" fill="#F5DEB3"/>
  
  <!-- Quills and ink -->
  <rect x="500" y="385" width="2" height="20" fill="#8B4513"/>
  <circle cx="501" cy="382" r="3" fill="#4B0082"/>
  
  <circle cx="520" cy="390" r="4" fill="#2F2F2F"/>
  
  <!-- Candles with holders -->
  <g>
    <!-- Left candle -->
    <rect x="240" y="350" width="12" height="30" fill="#CD853F"/>
    <rect x="243" y="340" width="6" height="15" fill="#F5DEB3"/>
    <ellipse cx="246" cy="337" rx="4" ry="6" fill="url(#candleFlame)">
      <animate attributeName="ry" values="6;8;6" dur="2s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="1;0.8;1" dur="1.5s" repeatCount="indefinite"/>
    </ellipse>
    <circle cx="246" cy="350" r="20" fill="url(#candleGlow)" opacity="0.3">
      <animate attributeName="opacity" values="0.3;0.5;0.3" dur="2s" repeatCount="indefinite"/>
    </circle>
    
    <!-- Right candle -->
    <rect x="548" y="350" width="12" height="30" fill="#CD853F"/>
    <rect x="551" y="340" width="6" height="15" fill="#F5DEB3"/>
    <ellipse cx="554" cy="337" rx="4" ry="6" fill="url(#candleFlame)">
      <animate attributeName="ry" values="6;8;6" dur="1.8s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="1;0.8;1" dur="1.3s" repeatCount="indefinite"/>
    </ellipse>
    <circle cx="554" cy="350" r="20" fill="url(#candleGlow)" opacity="0.3">
      <animate attributeName="opacity" values="0.3;0.5;0.3" dur="1.8s" repeatCount="indefinite"/>
    </circle>
  </g>
  
  <!-- Magical floating papers/scrolls -->
  <g opacity="0.7">
    <rect x="150" y="200" width="25" height="30" rx="2" fill="#F5DEB3" transform="rotate(15 162.5 215)">
      <animateTransform attributeName="transform" type="translate" values="0,0; 10,-20; 20,-40" dur="8s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.7;0.3;0" dur="8s" repeatCount="indefinite"/>
    </rect>
    
    <circle cx="650" cy="250" r="12" fill="#E6E6FA" transform="rotate(-20 650 250)">
      <animateTransform attributeName="transform" type="translate" values="0,0; -15,25; -30,50" dur="9s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.6;0.2;0" dur="9s" repeatCount="indefinite"/>
    </circle>
  </g>
  
  <!-- Mysterious runes on walls -->
  <g opacity="0.4">
    <text x="100" y="50" font-family="serif" font-size="16" fill="#9370DB">◊ ∆ ◊</text>
    <text x="350" y="40" font-family="serif" font-size="14" fill="#4B0082">⊕ ⊗ ⊙</text>
    <text x="600" y="60" font-family="serif" font-size="15" fill="#800080">※ ⊹ ※</text>
    <text x="150" y="450" font-family="serif" font-size="12" fill="#2F4F4F">⊰ ⊱ ⊰</text>
    <text x="550" y="460" font-family="serif" font-size="13" fill="#8B4513">◈ ◉ ◈</text>
  </g>
  
  <!-- Dust particles in candlelight -->
  <g opacity="0.5">
    <circle cx="200" cy="300" r="1" fill="#FFD700">
      <animateTransform attributeName="transform" type="translate" values="0,0; 30,-50; 60,-100" dur="12s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.5;0.1;0" dur="12s" repeatCount="indefinite"/>
    </circle>
    <circle cx="400" cy="280" r="0.8" fill="#DDA0DD">
      <animateTransform attributeName="transform" type="translate" values="0,0; -25,40; -50,80" dur="10s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.4;0.1;0" dur="10s" repeatCount="indefinite"/>
    </circle>
    <circle cx="600" cy="320" r="1.2" fill="#FF8C00">
      <animateTransform attributeName="transform" type="translate" values="0,0; 20,-30; 40,-60" dur="11s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.6;0.2;0" dur="11s" repeatCount="indefinite"/>
    </circle>
  </g>
  
  <!-- Atmospheric mood shadows -->
  <rect x="0" y="0" width="800" height="600" fill="black" opacity="0.15"/>
  
  <!-- Warm candle lighting overlay -->
  <ellipse cx="246" cy="350" rx="150" ry="100" fill="url(#candleGlow)" opacity="0.2"/>
  <ellipse cx="554" cy="350" rx="150" ry="100" fill="url(#candleGlow)" opacity="0.2"/>
</svg>